<div class="user-header row">
    <div class="col-md-2">
        <a ui-sref="users.teachers" ng-if="user.type == 1"><i class="glyphicon glyphicon-arrow-left"></i></a>
        <a ui-sref="users.students" ng-if="user.type == 2"><i class="glyphicon glyphicon-arrow-left"></i></a>
        <a ui-sref="users.admins" ng-if="user.type == 3"><i class="glyphicon glyphicon-arrow-left"></i></a>
        <img ng-src="{{ user.avatar }}">
    </div>
    <div class="col-md-10">
        <h1>{{ user.name }} <span>(<span ng-if="user.type == 1">{{ 'label.professor' | translate }}</span><span ng-if="user.type == 2">{{ 'label.student' | translate }}</span><span ng-if="user.type == 3">{{ 'label.admin' | translate }}</span>)</span></h1>
    </div>
</div>
<div class="data-container row">
    <div class="col-md-8">
        <div class="row">
            <div class="col-md-6">
                <canvas id="bar" class="chart chart-bar" chart-data="data" chart-labels="labels" chart-options="options" height="265%"></canvas>
            </div>
            <div class="col-md-6">
                <div style="display: inline-block;">
                    <uib-datepicker class="well well-sm" datepicker-options="dateOpts" ng-model="date"></uib-datepicker>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12" ng-show="user.type == 1">
                <h2>{{ 'label.last_month_activity' | translate }}</h2>
                <div class="widgets-container row">
                    <div class="col-md-4">
                        <div class="widget">
                            <p>{{ 'label.courses' | translate }}</p>
                            <h4>{{ courses.length | number }}</h4>
                            <span class="indicator indicator-up" ng-if="courses.length > coursesLast.length"></span>
                            <span class="indicator indicator-down" ng-if="courses.length < coursesLast.length"></span>
                            <span class="indicator indicator-same" ng-if="courses.length == coursesLast.length"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="widget">
                            <p>{{ 'label.assignments' | translate }}</p>
                            <h4>{{ assignments | number }}</h4>
                            <span class="indicator indicator-up" ng-if="assignments > assignmentsLast"></span>
                            <span class="indicator indicator-down" ng-if="assignments < assignmentsLast"></span>
                            <span class="indicator indicator-same" ng-if="assignments == assignmentsLast"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="widget">
                            <p>{{ 'label.discussions' | translate }}</p>
                            <h4>{{ discussions | number }}</h4>
                            <span class="indicator indicator-up" ng-if="discussions > discussionsLast"></span>
                            <span class="indicator indicator-down" ng-if="discussions < discussionsLast"></span>
                            <span class="indicator indicator-same" ng-if="discussions == discussionsLast"></span>
                        </div>
                    </div>
                </div>
                <div class="widgets-container row">
                    <div class="col-md-4">
                        <div class="widget">
                            <p>{{ 'label.comments' | translate }}</p>
                            <h4>{{ comments | number }}</h4>
                            <span class="indicator indicator-up" ng-if="comments > commentsLast"></span>
                            <span class="indicator indicator-down" ng-if="comments < commentsLast"></span>
                            <span class="indicator indicator-same" ng-if="comments == commentsLast"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="widget">
                            <p>{{ 'label.questionaries' | translate }}</p>
                            <h4>{{ questionaries | number }}</h4>
                            <span class="indicator indicator-up" ng-if="questionaries > questionariesLast"></span>
                            <span class="indicator indicator-down" ng-if="questionaries < questionariesLast"></span>
                            <span class="indicator indicator-same" ng-if="questionaries == questionariesLast"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="widget">
                            <p>{{ 'label.files' | translate }}</p>
                            <h4>{{ files | number }}</h4>
                            <span class="indicator indicator-up" ng-if="files > filesLast"></span>
                            <span class="indicator indicator-down" ng-if="files < filesLast"></span>
                            <span class="indicator indicator-same" ng-if="files == filesLast"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12" ng-show="user.type == 2">
                <h2>{{ 'label.last_month_activity' | translate }}</h2>
                <div class="widgets-container row">
                    <div class="col-md-4">
                        <p>{{ 'label.homeworks' | translate }}: <span class="green">{{ assignmentsSolved }} {{ 'label.of' | translate }} {{ assignments }}</span></p>
                    </div>
                    <div class="col-md-7">
                        <div class="progress">
                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{ assignmentsSolved / assignments * 100 | number:2 }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ assignmentsSolved / assignments * 100 | number:2; }}%;">
                                {{ assignmentsSolved / assignments * 100 | number:2 }}%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <table class="table">
            <thead>
                <tr>
                    <th width="30%">{{ 'label.activity' | translate }}</th>
                    <th width="30%">{{ 'label.course' | translate }}</th>
                    <th>{{ 'label.date' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="activity in activities">
                    <td>{{ 'label.activity.' + activity.activity | translate }}</td>
                    <td>{{ activity.course.name }}</td>
                    <td>{{ activity.date | relativeDate }}</td>
                </tr>
            </tbody>
        </table>
        <p class="text-center">
            <uib-pagination max-size="3" boundary-links="true" boundary-link-numbers="true" rotate="true" total-items="totalActivities" items-per-page="per_page" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" ng-model="page" ng-change="queryActivities()"></uib-pagination>
        </p>
    </div>
</div>